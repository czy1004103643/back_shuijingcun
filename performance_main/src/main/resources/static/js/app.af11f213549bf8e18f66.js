webpackJsonp([1],{"2Fpf":function(e,t){},"2gkO":function(e,t){},"4Vjc":function(e,t){},AKjb:function(e,t){},BKLM:function(e,t){},CF7o:function(e,t){},EXNR:function(e,t){},Gvv4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAIAAADZ8fBYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEVERUJDNDE2QTgyMTFFNjg2RjJFMEMzQkNEN0VFNzkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEVERUJDNDA2QTgyMTFFNjg2RjJFMEMzQkNEN0VFNzkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9IjUxRDE1NjhCNkRGRkQzRjQ5NDIyNUU2NTkwNzk5OTlEIiBzdFJlZjpkb2N1bWVudElEPSI1MUQxNTY4QjZERkZEM0Y0OTQyMjVFNjU5MDc5OTk5RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ps6Op4wAAAGcSURBVHja7JVLT8JAEMe7YEsrW1KwBWsRiCQmxAMXD/pRjTc/jY8YkchBLQ/B8PBBIRZKoS1OQkKQapbWcNLJHrbzb37ZTuc/i05Oz6g1RIBaT6yLu7HKS/G4mE4lMcaIovTBoNFottqd33Kz2Uw6tTt/BHoutx+J8PcPqv86xGLRReg8FEVOJCT/3KQi/yQpO7J/bniT8yGRubbj+JDIXE3r+5DI3HrjeWJN3HnLtmpPdf9c0xwXCnemaS4mJ+NxsVgyjJGf/g0GA4IggBHe3rvnF9dgjQiPKQrput7uvDqOI4lbUGJN602n01W5PMb5/AHDMLDv9/rlSq3V6sCaqdGokN3LgDVgbxjGbbE0HBpLBOSeZwih46NDlmUXk8ZopH/oIPE4HPoqwRdcXt2QzxuXxCUoBMeynCs5dzbYstvVCP8NSul1eklijNwPOBz2yp3VmsBluZBXLsuGyFyEPA97mmbIXPCSV65t22Ruu/nileu+Pr7ps8dyxaEceTtB0zSRaFkW+EUtV8lc8KWqVmH9pXv+nzuLTwEGAKEgl7o7VAQQAAAAAElFTkSuQmCC"},HOXm:function(e,t){},"HT/c":function(e,t){},Iqe1:function(e,t){},"JZQ/":function(e,t){},MBUu:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},n=a("VU/8")({name:"App"},o,!1,null,null,null).exports,i=a("/ocq"),s=a("mtWM"),l=a.n(s),c=a("mw3O"),u=a.n(c),d="http://"+window.location.host;function m(e,t,a){var r=new Date;r.setSeconds(r.getSeconds()+a),document.cookie=e+"="+escape(t)+"; expires="+r.toGMTString()}function p(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?e+"="+t[2]:null}function g(e){var t=new Date;t.setTime(t.getTime()-1);var a=p(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())}var f={name:"Login",data:function(){return{login:{account:[{required:!0,message:"请输入用户名",trigger:"blur"}],passwd:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!1,loginForm:{account:"",passwd:""},loading:!1,redirect:void 0}},methods:{submitClick:function(e){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,l.a.post(d+"/login/account",u.a.stringify({account:t.loginForm.account,passwd:t.loginForm.passwd})).then(function(e){var a=e.data.detail.cookie;""!==a&&(0==e.data.code?p("byd_performance")?(g("byd_performance"),m(a.name,a.value,864e5),t.$store.dispatch("GetUserInfo"),t.loading=!1,t.$router.push("/personal"),t.loginForm.account="",t.loginForm.passwd=""):(m(a.name,a.value,36e5),t.$store.dispatch("GetUserInfo"),t.loading=!1,t.$router.push("/personal"),t.loginForm.account="",t.loginForm.passwd=""):(t.$message.error(e.data.message),t.loading=!1,t.loginForm.account="",t.loginForm.passwd=""))}).catch(function(e){console.log(e)})})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"loginForm",staticClass:"login-container",attrs:{rules:e.login,model:e.loginForm,"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"login-title"},[e._v("绩效考核系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"account"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitClick(t):null}},model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submitClick(t):null}},model:{value:e.loginForm.passwd,callback:function(t){e.$set(e.loginForm,"passwd",t)},expression:"loginForm.passwd"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"100%","margin-top":"10px"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.submitClick}},[e._v("登录")])],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(f,h,!1,function(e){a("AKjb")},"data-v-e1085582",null).exports,b={name:"Header",data:function(){return{}},mounted:function(){},methods:{loginOut:function(){this.$store.dispatch("LogOut",this).then(function(){location.reload()})},modifyPassword:function(){this.$router.push("/password")}}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[r("div",{staticClass:"header-logo"},[r("img",{staticClass:"img-logo",attrs:{src:a("dLd/")}}),e._v(" "),r("span",[e._v("绩效考核系统")]),e._v(" "),r("div",{staticClass:"user-info"},[r("img",{attrs:{src:a("Gvv4")}}),e._v(" "),r("el-dropdown",[r("span",{staticClass:"el-dropdown-link"},[r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{nativeOn:{click:function(t){return e.modifyPassword(t)}}},[e._v("修改密码")]),e._v(" "),r("el-dropdown-item",{nativeOn:{click:function(t){return e.loginOut(t)}}},[e._v("退出登录")])],1)],1)],1)])])},staticRenderFns:[]};var w=a("VU/8")(b,_,!1,function(e){a("4Vjc")},null,null).exports,y=a("Dd8w"),S=a.n(y),k=a("NYxO"),F={data:function(){return{isCollapse:!0}},computed:S()({},Object(k.b)(["permission_routers"])),methods:{}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar"},[a("el-menu",{staticClass:"sidebar-el-menu",attrs:{collapse:e.isCollapse,"background-color":"#324157","default-active":"","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""}},[e._l(e.permission_routers[0].children,function(t){return[a("el-menu-item",{key:t.name,staticStyle:{margin:"-0.3rem 0"},attrs:{index:t.index}},[a("i",{class:t.icon}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])]})],2)],1)},staticRenderFns:[]};var D={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer"},[t("div",{staticClass:"footer-inner"},[this._v("\n    版权所有©比亚迪股份有限公司\n  ")])])}]};var P={name:"Home",components:{Header:w,Sidebar:a("VU/8")(F,R,!1,function(e){a("JZQ/")},"data-v-2f419a46",null).exports,Footer:a("VU/8")({name:"Footer",data:function(){return{}}},D,!1,function(e){a("l39X")},null,null).exports},data:function(){return{}}},G={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"home clearfix"},[t("Header"),this._v(" "),t("Sidebar",{staticClass:"sidebar"}),this._v(" "),t("div",{staticClass:"content-wrapper"},[t("div",{staticClass:"content-box"},[t("transition",[t("keep-alive",[t("router-view")],1)],1)],1)]),this._v(" "),t("Footer")],1)},staticRenderFns:[]};var C=a("VU/8")(P,G,!1,function(e){a("nw5S")},null,null).exports,M={name:"Personal",data:function(){return{userInfo:[],userImg:"",historyData:[],total:0,pageSize:6,currentPage:1}},mounted:function(){this.setPerTable(),this.historyTable()},methods:{setPerTable:function(){var e=this;l.a.get(d+"/personal/info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?(e.userInfo=t.data.detail.userInfo,e.userImg=d+t.data.detail.userAvatar):e.$message.error(t.data.code)}).catch(function(e){console.log(e)})},historyTable:function(){var e=this;l.a.get(d+"/score-history/person-info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?e.historyData=t.data.detail.historyData:e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},handlePageChange:function(e){this.currentPage=e}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personal"},[a("span",{staticClass:"img-title"},[e._v("头像")]),e._v(" "),a("a",{attrs:{href:"#"}},[a("img",{staticClass:"personal-img",attrs:{src:e.userImg,alt:""}})]),e._v(" "),a("h3",{staticClass:"personal-title"},[e._v("个人信息 ")]),e._v(" "),a("el-table",{staticStyle:{width:"100%",margin:"0 auto"},attrs:{data:e.userInfo,border:"",fit:"","header-cell-style":{color:"#46a5fe"},size:"mini","max-height":"140"}},[a("el-table-column",{attrs:{align:"center",prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"groupName",label:"组别"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"isLeader",label:"小组角色"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"projects",label:"项目组"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.projects,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.projectName))])])})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"projects",label:"项目角色"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.projects,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.projectRole))])])})}}])})],1),e._v(" "),a("div",{staticClass:"history"},[a("h3",{staticClass:"history-title"},[e._v("历史考核记录")]),e._v(" "),0!=this.historyData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.historyData,border:"",fit:"","header-cell-style":{color:"#46a5fe"},size:"mini","max-height":"180"}},[a("el-table-column",{attrs:{fixed:"",align:"center",prop:"scoreTime",label:"考核月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"groupData",label:"小组考核"}},[a("el-table-column",{attrs:{align:"center",prop:"groupData.groupName",label:"组名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"groupData.groupLeader",label:"考核者"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"groupWeight",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"groupData.groupScore",label:"分数"}})],1),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"项目考核"}},[a("el-table-column",{attrs:{align:"center",label:"项目名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.projectData.length?e._l(t.row.projectData,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.projectName))])])}):void 0}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"考核者"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.projectData.length?e._l(t.row.projectData,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.projectLeader))])])}):void 0}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"projectWeight",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"分数"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.projectData.length?e._l(t.row.projectData,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.projectScore))])])}):void 0}}])})],1),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"项目完成度"}},[a("el-table-column",{attrs:{align:"center",label:"项目名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.ownScoreData.length?e._l(t.row.ownScoreData,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.projectName))])])}):void 0}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ownWeight",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"分数"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.ownScoreData.length?e._l(t.row.ownScoreData,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.ownScore))])])}):void 0}}])})],1),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",prop:"totalScore",label:"总分"}})],1):e._e(),e._v(" "),this.historyData.length>=3?a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pageChange",attrs:{"page-size":e.pageSize,"page-count":10,layout:"prev, pager, next",total:e.total,"current-page":e.currentPage},on:{"current-change":e.handlePageChange}})],1):e._e()],1)],1)},staticRenderFns:[]};var j=a("VU/8")(M,I,!1,function(e){a("CF7o")},"data-v-5a4d6efa",null).exports,L={name:"LeaderReview",data:function(){return{groupData:[],editLeaderScore:!0}},mounted:function(){this.leaderEdit()},methods:{leaderEdit:function(){var e=this;l.a.get(d+"/leader-scoring/info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code&&0!==t.data.detail.groupData.length?e.groupData=t.data.detail.groupData:0==t.data.code&&0==t.data.detail.groupData.length?e.$message.error("考核未开启"):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},submitLeaderScore:function(){var e=this;l.a.post(d+"/leader-scoring/group-score-submit",{cookie:p("byd_performance"),groupData:this.groupData}).then(function(t){0==t.data.code?(e.$message({message:"提交成功",type:"success"}),e.editLeaderScore=!0):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"review"},[0!=this.groupData.length?a("el-button",{staticStyle:{margin:"1rem 0 1rem 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n      小组考核表\n  ")]):e._e(),e._v(" "),0!=this.groupData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.groupData,border:"",fix:"","header-cell-style":{color:"#46a5fe"},size:"mini"}},[a("el-table-column",{attrs:{align:"center",prop:"time",label:"考核月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"isLeader",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"groupName",label:"小组名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"workContent",label:"工作内容",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.workContent,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t))])])})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"myBoss",label:"直系领导"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"scoreWeight",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"scoreResult",label:"考核分数(百分制)",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==e.editLeaderScore?a("el-input",{attrs:{size:"small"},model:{value:t.row.scoreResult,callback:function(a){e.$set(t.row,"scoreResult",a)},expression:"scope.row.scoreResult"}}):a("p",[e._v(e._s(t.row.scoreResult))])]}}])})],1):e._e(),e._v(" "),a("div",{staticClass:"submitButton"},[0!=this.groupData.length?a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.editLeaderScore=!1}}},[e._v("填写")]):e._e(),e._v(" "),0!=this.groupData.length?a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:e.submitLeaderScore}},[e._v("提交")]):e._e()],1)],1)},staticRenderFns:[]};var N=a("VU/8")(L,x,!1,function(e){a("Iqe1")},"data-v-215a5608",null).exports,O={name:"ProjectReview",data:function(){return{projectData:[],editProScore:!0}},mounted:function(){this.projectEdit()},methods:{projectEdit:function(){var e=this;l.a.get(d+"/leader-scoring/info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code&&0!==t.data.detail.projectData.length?e.projectData=t.data.detail.projectData:0==t.data.code&&0==t.data.detail.projectData.length?e.$message.error("考核未开启"):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},submitProjectScore:function(){var e=this;l.a.post(d+"/leader-scoring/project-score-submit",{cookie:p("byd_performance"),projectData:this.projectData}).then(function(t){0==t.data.code?(e.$message({message:"提交成功",type:"success"}),e.editProScore=!0,e.projectEdit()):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"review"},[0!=this.projectData.length?a("el-button",{staticStyle:{margin:"1rem 0 1rem 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n      项目考核表\n  ")]):e._e(),e._v(" "),0!=this.projectData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.projectData,border:"",fix:"","header-cell-style":{color:"#46a5fe"},size:"mini"}},[a("el-table-column",{attrs:{align:"center",prop:"time",label:"考核月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"projectRole",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"projectName",label:"项目组"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"workContent",label:"工作内容",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"myBoss",label:"项目领导"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"scoreWeight",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"scoreResult",width:"150",label:"考核分数(百分制)"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==e.editProScore?a("el-input",{attrs:{size:"small"},model:{value:t.row.scoreResult,callback:function(a){e.$set(t.row,"scoreResult",a)},expression:"scope.row.scoreResult"}}):a("p",[e._v(e._s(t.row.scoreResult))])]}}])})],1):e._e(),e._v(" "),a("div",{staticClass:"submitButton"},[0!=this.projectData.length?a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.editProScore=!1}}},[e._v("填写")]):e._e(),e._v(" "),0!=this.projectData.length?a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:e.submitProjectScore}},[e._v("提交")]):e._e()],1)],1)},staticRenderFns:[]};var T=a("VU/8")(O,E,!1,function(e){a("borg")},"data-v-521e76aa",null).exports,z={name:"BeReview",data:function(){return{groupData:[],projectData:[],selfReivewData:[],editSelfScore:!0}},mounted:function(){this.selfEdit(),this.groupEdit(),this.projectEdit()},computed:{},methods:{selfEdit:function(){var e=this;l.a.get(d+"/yourself/information",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code&&0!==t.data.detail.userInfo.length?e.selfReivewData=t.data.detail.userInfo:0==t.data.code&&0==t.data.detail.userInfo.length?e.$message.error("考核未开启"):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},groupEdit:function(){var e=this;l.a.get(d+"/member-scored/group-info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code&&0!==t.data.detail.groupData.length&&(e.groupData=t.data.detail.groupData)}).catch(function(e){console.log(e)})},projectEdit:function(){var e=this;l.a.get(d+"/member-scored/project-info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code&&0!==t.data.detail.projectData.length&&(e.projectData=t.data.detail.projectData)}).catch(function(e){console.log(e)})},submitSelfScore:function(){var e=this;l.a.post(d+"/yourself/submit",{cookie:p("byd_performance"),userInfo:this.selfReivewData}).then(function(t){0==t.data.code?(e.$message({message:"提交成功",type:"success"}),e.editSelfScore=!0):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"beReview"},[0!=this.selfReivewData.length?a("el-button",{staticStyle:{margin:"0.5rem 0 0 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n      当月考核表\n  ")]):e._e(),e._v(" "),0!=this.selfReivewData.length?a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.selfReivewData,"header-cell-style":{color:"#46a5fe"},algin:"center",fix:"",border:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",prop:"assessMouth",label:"考核月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"project",label:"项目名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.project,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.projectName))])])})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"project",label:"项目角色"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.project,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.projectRole))])])})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"project",label:"工作内容",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.project,function(t,r){return a("div",{key:r,attrs:{align:"left"}},[0==e.editSelfScore?a("el-input",{attrs:{type:"textarea",size:"mini"},model:{value:t.workContent,callback:function(a){e.$set(t,"workContent",a)},expression:"item.workContent"}}):a("p",[e._v(e._s(t.workContent))])],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"project",label:"权重"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.project,function(t,r){return a("div",{key:r},[a("p",[e._v(e._s(t.weights))])])})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"project",label:"项目完成度(百分制)",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.project.score)+"\n          "),e._l(t.row.project,function(t,r){return a("div",{key:r,attrs:{align:"center"}},["FO"==t.projectRole&&0==e.editSelfScore?a("el-input",{attrs:{size:"small"},model:{value:t.score,callback:function(a){e.$set(t,"score",a)},expression:"item.score"}}):a("span",[e._v(e._s(t.score))])],1)})]}}])})],1):e._e(),e._v(" "),a("div",{staticClass:"submitButton"},[0!=this.selfReivewData.length?a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){e.editSelfScore=!1}}},[e._v("填写")]):e._e(),e._v(" "),0!=this.selfReivewData.length?a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:e.submitSelfScore}},[e._v("提交")]):e._e()],1),e._v(" "),0!=this.groupData.length?a("el-button",{staticStyle:{"margin-bottom":"0.7rem"},attrs:{type:"primary",round:"",fit:"",size:"mini"}},[e._v("\n      小组考核成绩\n  ")]):e._e(),e._v(" "),0!=this.groupData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.groupData,border:"","header-cell-style":{color:"#46a5fe"},size:"mini"}},[a("el-table-column",{attrs:{align:"center",prop:"time",label:"考核月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"isLeader",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"groupName",label:"小组名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"workContent",label:"工作内容",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.workContent,function(t,r){return a("div",{key:r},[a("p",{attrs:{align:"left"}},[e._v(e._s(t))])])})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"myBoss",label:"直系领导"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"scoreWeight",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"scoreResult",label:"考核分数"}})],1):e._e(),e._v(" "),0!=this.projectData.length?a("el-button",{staticStyle:{margin:"0.5rem 0 0.5rem 0"},attrs:{type:"primary",round:"",fit:"",size:"mini"}},[e._v("\n      项目考核成绩\n  ")]):e._e(),e._v(" "),0!=this.projectData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.projectData,"header-cell-style":{color:"#46a5fe"},border:"",fit:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",prop:"time",label:"考核月份"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"projectRole",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"projectName",label:"项目组",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"workContent",label:"工作内容",width:"250%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{attrs:{align:"left"}},[e._v(e._s(t.row.workContent))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"myBoss",label:"项目leader"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"scoreWeight",label:"权重"}}),e._v(" "),a("el-table-column",{attrs:{prop:"scoreResult",align:"center",width:"120%",label:"考核分数"}})],1):e._e()],1)},staticRenderFns:[]};var $=a("VU/8")(z,A,!1,function(e){a("Pbnm")},"data-v-79463cb3",null).exports,U=a("lHA8"),B=a.n(U),W=a("c/Tr"),Y=a.n(W),V=a("BO1k"),Z=a.n(V),J=a("bOdI"),Q=a.n(J),q={name:"GroupManage",data:function(){var e,t=this;return e={oldGroupData:[],groupData:[]},Q()(e,"oldGroupData",[]),Q()(e,"dialogAddVisible",!1),Q()(e,"dialogEditGroup",!1),Q()(e,"dialogDeleteGroup",!1),Q()(e,"newGroupForm",{groupName:"",groupLeader:""}),Q()(e,"editGroupForm",{groupName:"",groupLeader:"",groupMembers:[]}),Q()(e,"leaderSelectData",[]),Q()(e,"memberSelectData",[]),Q()(e,"memberLength",""),Q()(e,"existedRowData",[]),Q()(e,"deleteGroup",""),Q()(e,"group",{groupName:[{validator:function(e,a,r){if(!a)return r(new Error("小组名不能为空"));for(var o=0;o<t.groupData.length;o++)if(a==t.groupData[o].groupName)return r(new Error("该小组名已存在"));r()},trigger:"blur"}],groupLeader:[{validator:function(e,a,r){if(!a)return r(new Error("组长不能为空"));for(var o=new Array,n=0;n<t.leaderSelectData.length;n++)o.push(t.leaderSelectData[n].leaderId);if(-1==o.indexOf(a.split("=")[0]))return r(new Error("工号不正确"));r()},trigger:"blur"}]}),Q()(e,"rules",{groupLeader:[{validator:function(e,a,r){if(a||0!=t.editGroupForm.groupMembers.length){if(a)for(var o=0;o<t.groupData.length;o++){if(t.groupData[o].groupLeader&&a==t.groupData[o].groupLeader.idNumber)return r(new Error(t.groupData[o].groupLeader.idNumber+"已经是组长，请重新选择"));r()}}else{if(t.memberLength==t.existedRowData.groupMembers.length)return r(new Error("未作任何更改，请勿提交"));r()}r()},trigger:"blur"}],groupMembers:[{validator:function(e,a,r){if(0!=a.length||t.editGroupForm.groupLeader){if(0!==a.length)for(var o=0;o<a.length;o++){if(a[o]==t.editGroupForm.groupLeader)return r(new Error("组长和组员不可是同一人，请重新选择"));r()}}else{if(t.memberLength==t.existedRowData.groupMembers.length)return r(new Error("未作任何更改，请勿提交"));r()}r()},trigger:"blur"}]}),Q()(e,"keywords",""),Q()(e,"total",0),Q()(e,"pageSize",7),Q()(e,"currentPage",1),e},mounted:function(){this.setGroupTable()},watch:{keywords:function(e,t){this.groupData=this.oldGroupData.filter(function(t){return~t.groupName.indexOf(e)}),this.total=this.groupData.length}},computed:{searchGroupData:function(){(this.keywords="")&&(this.groupData=this.oldGroupData,this.total=this.groupData.length)}},methods:{setGroupTable:function(){var e=this;l.a.get(d+"/group/optional-user",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?(e.leaderSelectData=t.data.detail.leaderSelectData,e.memberSelectData=t.data.detail.MemberSelectData):e.$message.error(t.data.message)}).catch(function(e){console.log(e)}),l.a.get(d+"/group/info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?(e.groupData=t.data.detail.groupData,e.oldGroupData=t.data.detail.groupData,e.total=t.data.detail.groupData.length):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},handlePageChange:function(e){this.currentPage=e},addGroup:function(){this.dialogAddVisible=!0,this.setGroupTable()},querySearchLeader:function(e,t){var a=this.leaderSelectData,r=!0,o=!1,n=void 0;try{for(var i,s=Z()(a);!(r=(i=s.next()).done);r=!0){var l=i.value;l.value=l.leaderId+"=>"+l.leader}}catch(e){o=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}t(e?a.filter(this.createFilterLeader(e)):a)},createFilterLeader:function(e){return function(t){return 0===t.value.indexOf(e)}},querySearchMember:function(e,t){var a=this.memberSelectData,r=!0,o=!1,n=void 0;try{for(var i,s=Z()(a);!(r=(i=s.next()).done);r=!0){var l=i.value;l.value=l.memberId+"=>"+l.member}}catch(e){o=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}t(e?a.filter(this.createFilterMember(e)):a)},createFilterMember:function(e){return function(t){return 0===t.value.indexOf(e)}},submitForm:function(e){var t=this;this.$refs.newGroupForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;l.a.post(d+"/group/create",u.a.stringify({cookie:p("byd_performance"),groupName:t.newGroupForm.groupName,leaderId:t.newGroupForm.groupLeader.split("=>")[0]})).then(function(e){0==e.data.code?(t.setGroupTable(),t.$message({message:"创建成功",type:"success"}),t.$refs.newGroupForm.resetFields(),t.dialogAddVisible=!1):(t.$message.error(e.data.message),t.setGroupTable())}).catch(function(e){console.log(e)})})},concelForm:function(e){void 0!==this.$refs.newGroupForm&&(this.$refs.newGroupForm.resetFields(),this.dialogAddVisible=!1)},editGroup:function(e,t){this.dialogEditGroup=!0,this.existedRowData=t,this.memberLength=this.existedRowData.groupMembers.length,this.setGroupTable()},deleteMember:function(e,t){this.existedRowData.groupMembers.splice(e,1)},submitEditForm:function(){var e=this;this.$refs.editGroupForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;for(var a=0;a<e.existedRowData.groupMembers.length;a++)e.editGroupForm.groupMembers.push(e.existedRowData.groupMembers[a].idNumber);var r=Y()(new B.a(e.editGroupForm.groupMembers));l.a.post(d+"/group/group-update-member",{cookie:p("byd_performance"),groupName:e.existedRowData.groupName,groupLeader:e.editGroupForm.groupLeader,groupMembers:r}).then(function(t){0==t.data.code?(e.setGroupTable(),e.$message({message:"修改成功",type:"success"}),e.$refs.editGroupForm.resetFields(),e.dialogEditGroup=!1):(e.setGroupTable(),e.$message.error(t.data.message))}).catch(function(e){console.log(e)})})},concelEditForm:function(){void 0!==this.$refs.editGroupForm&&(this.$refs.editGroupForm.resetFields(),this.dialogEditGroup=!1)},removeGroup:function(e,t){this.deleteGroup=t.groupName,this.dialogDeleteGroup=!0},confirmDeleteGroup:function(){var e=this;l.a.post(d+"/group/delete-group",u.a.stringify({cookie:p("byd_performance"),groupName:this.deleteGroup})).then(function(t){0==t.data.code?(e.setGroupTable(),e.$message({message:"删除成功",type:"success"}),e.dialogDeleteGroup=!1):(e.setGroupTable(),e.$message.error(t.data.message))}).catch(function(e){console.log(e)})},notes:function(){this.$message({showClose:!0,message:"组员和组长不能由同一人担任哦",type:"warning"})}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group"},[a("el-button",{staticStyle:{margin:"2rem 0 1rem 0"},attrs:{type:"primary",round:"",icon:"el-icon-edit",size:"mini"},on:{click:e.addGroup}},[e._v("\n            创建小组\n    ")]),e._v(" "),a("el-input",{staticStyle:{width:"12rem"},attrs:{placeholder:"请输入组名进行搜索",clearable:"",size:"mini","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchGroupData(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),0!=this.groupData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.groupData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:"","header-cell-style":{color:"#46a5fe"},algin:"center",fix:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",prop:"groupName",label:"组名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"组长"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t.row.groupLeader?[a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("组长姓名")]),e._v("\n                                "+e._s(t.row.groupLeader.leaderName)+"\n                            ")],1),e._v(" "),a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("组长工号")]),e._v("\n                                "+e._s(t.row.groupLeader.idNumber)+"\n                            ")],1)]:e._e()],2),e._v(" "),a("el-tag",{attrs:{size:"primary"}},[e._v(e._s(t.row.groupLeader?t.row.groupLeader.leaderName:"未设置"))])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"组员"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"right"}},[a("div",{staticStyle:{width:"10rem","max-height":"25rem","overflow-y":"scroll"},attrs:{slot:"content"},slot:"content"},[t.row.groupMembers?e._l(t.row.groupMembers,function(t,r){return a("div",{key:r},[a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("组员姓名")]),e._v("\n                                    "+e._s(t.memberName)+"\n                                    "),a("el-tag",{attrs:{size:"mini"}},[e._v("组员工号")]),e._v("\n                                    "+e._s(t.idNumber)+"\n                                ")],1)])}):e._e()],2),e._v(" "),a("el-tag",{attrs:{size:"primary"}},[e._v(e._s(0==t.row.groupMembers.length?"未设置":"组员信息"))])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.editGroup(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.removeGroup(t.$index,t.row)}}},[e._v("删除")])]}}])})],1):e._e(),e._v(" "),this.groupData.length>7?a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pageChange",attrs:{"page-size":e.pageSize,"page-count":10,layout:"prev, pager, next",total:e.total,"current-page":e.currentPage},on:{"current-change":e.handlePageChange}})],1):e._e(),e._v(" "),[a("el-button",{staticStyle:{color:"#20a0ff"},attrs:{plain:!0,size:"small"},on:{click:e.notes}},[e._v("操作前提醒")])],e._v(" "),a("el-dialog",{attrs:{visible:e.dialogAddVisible,center:"",width:"25rem"},on:{"update:visible":function(t){e.dialogAddVisible=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("新建小组")])]),e._v(" "),a("el-form",{ref:"newGroupForm",attrs:{model:e.newGroupForm,rules:e.group,"status-icon":"","label-width":"80px",size:"mini"}},[a("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"小组名",prop:"groupName",required:""}},[a("el-input",{model:{value:e.newGroupForm.groupName,callback:function(t){e.$set(e.newGroupForm,"groupName",t)},expression:"newGroupForm.groupName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"小组组长",required:"",prop:"groupLeader"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearchLeader,placeholder:"请输入工号查找"},model:{value:e.newGroupForm.groupLeader,callback:function(t){e.$set(e.newGroupForm,"groupLeader",t)},expression:"newGroupForm.groupLeader"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right",margin:"0px auto"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.concelForm}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogEditGroup,width:"30rem",center:""},on:{"update:visible":function(t){e.dialogEditGroup=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("修改小组信息")])]),e._v(" "),0!=this.existedRowData.groupMembers?a("el-table",{staticStyle:{"margin-bottom":"20px"},attrs:{border:"",size:"mini","max-height":"200",data:e.existedRowData.groupMembers,"header-cell-style":{color:"#46a5fe"},algin:"center",fix:""}},[a("el-table-column",{attrs:{align:"center",prop:"memberName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"idNumber",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.deleteMember(t.$index,t.row)}}},[e._v("删除")])]}}])})],1):e._e(),e._v(" "),a("el-form",{ref:"editGroupForm",attrs:{model:e.editGroupForm,rules:e.rules,"status-icon":"","label-width":"70px",size:"mini"}},[a("el-form-item",{attrs:{label:"修改组长",prop:"groupLeader"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择(可输入姓名或工号查找)"},model:{value:e.editGroupForm.groupLeader,callback:function(t){e.$set(e.editGroupForm,"groupLeader",t)},expression:"editGroupForm.groupLeader"}},e._l(e.leaderSelectData,function(e){return a("el-option",{key:e.leaderId,attrs:{label:"工号:"+e.leaderId+"=>姓名:"+e.leader,value:e.leaderId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"新增组员",prop:"groupMembers"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{size:"small",multiple:"",filterable:"",placeholder:"请选择(可输入姓名或工号查找)"},model:{value:e.editGroupForm.groupMembers,callback:function(t){e.$set(e.editGroupForm,"groupMembers",t)},expression:"editGroupForm.groupMembers"}},e._l(e.memberSelectData,function(e){return a("el-option",{key:e.memberId,attrs:{label:"工号:"+e.memberId+"=>姓名:"+e.member,value:e.memberId}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right",margin:"0px auto"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitEditForm}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.concelEditForm}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogDeleteGroup,width:"20rem"},on:{"update:visible":function(t){e.dialogDeleteGroup=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("删除小组")])]),e._v(" "),a("span",{staticStyle:{color:"#e6a23c","font-size":"1.2rem","text-align":"center"}},[e._v("您确定要删除该小组吗？")]),e._v(" "),a("span",{staticStyle:{"text-align":"right",margin:"0px auto"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogDeleteGroup=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirmDeleteGroup}},[e._v("确 定")])],1)])],2)},staticRenderFns:[]};var X=a("VU/8")(q,H,!1,function(e){a("MBUu")},"data-v-ee873eca",null).exports,K={name:"ProjectManage",data:function(){var e=this;return{labelPosition:"left",oldProjectGroupData:[],projectGroupData:[],dialogCreateProject:!1,dialogEditSPDM:!1,dialogEditARC:!1,dialogEditFGL:!1,dialogEditFO:!1,dialogDeleteProject:!1,leaderMembers:[],spdmMembers:[],arcMembers:[],foMembers:[],existedMembers:[],createProjectForm:{projectName:"",spdmId:"",leaderId:""},editSPDMForm:{projectName:"",spdmId:""},editARCForm:{projectName:"",ARCId:""},editFGLForm:{projectName:"",leaderId:""},editFOForm:{projectName:"",featureOwnerId:""},deleteProjectForm:"",rules:{projectName:[{validator:function(t,a,r){if(!a)return r(new Error("项目名不能为空"));for(var o=0;o<e.projectGroupData.length;o++)if(a==e.projectGroupData[o].featureGroupName)return r(new Error("项目名已存在"));r()},trigger:"blur"}],spdmId:[{validator:function(t,a,r){if(!a)return r(new Error("请选择项目负责人"));if(e.createProjectForm.leaderId===a)return r(new Error("项目负责人与功能组长不能相同"));for(var o=new Array,n=0;n<e.spdmMembers.length;n++)o.push(e.spdmMembers[n].userId);if(-1==o.indexOf(a.split("=")[0]))return r(new Error("工号不正确"));r()},trigger:"blur"}],ARCId:[{validator:function(t,a,r){if(!a)return r(new Error("请选择项目架构师"));for(var o=new Array,n=0;n<e.arcMembers.length;n++)o.push(e.arcMembers[n].userId);if(-1==o.indexOf(a.split("=")[0]))return r(new Error("工号不正确"));r()},trigger:"blur"}],leaderId:[{validator:function(t,a,r){if(!a)return r(new Error("请选择功能组长"));if(e.createProjectForm.spdmId===a)return r(new Error("项目负责人与功能组长不能相同"));for(var o=new Array,n=0;n<e.leaderMembers.length;n++)o.push(e.leaderMembers[n].userId);if(-1==o.indexOf(a.split("=")[0]))return r(new Error("工号不正确"));r()},trigger:"blur"}],featureOwnerId:[{validator:function(t,a,r){for(var o=0;o<e.existedMembers.length;o++)for(var n=0;n<a.length;n++)if(a[n]==e.existedMembers[o].userId)return r(new Error(e.existedMembers[o].userId+"已在组别中,请重新选择"));r()},trigger:"blur"}]},keywords:"",total:0,pageSize:7,currentPage:1}},mounted:function(){this.setProjectTable()},watch:{keywords:function(e,t){this.projectGroupData=this.oldProjectGroupData.filter(function(t){return~t.featureGroupName.indexOf(e)}),this.total=this.projectGroupData.length}},computed:{searchProjectData:function(){(this.keywords="")&&(this.projectGroupData=this.oldProjectGroupData,this.total=this.groupData.length)}},methods:{setProjectTable:function(){var e=this;l.a.get(d+"/project/optional-user",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?(e.spdmMembers=t.data.detail.spdmMembers,e.arcMembers=t.data.detail.arcMembers,e.leaderMembers=t.data.detail.leaderMembers,e.foMembers=t.data.detail.foMembers):e.$message.error(t.data.message)}).catch(function(e){console.log(e)}),l.a.get(d+"/project/info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?(e.projectGroupData=t.data.detail.projectData,e.projectGroupData=t.data.detail.projectData,e.oldProjectGroupData=t.data.detail.projectData,e.total=t.data.detail.projectData.length):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},createProject:function(){this.dialogCreateProject=!0,this.setProjectTable()},querySearchSPDMmembers:function(e,t){var a=this.spdmMembers,r=!0,o=!1,n=void 0;try{for(var i,s=Z()(a);!(r=(i=s.next()).done);r=!0){var l=i.value;l.value=l.userId+"=>"+l.userName}}catch(e){o=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}t(e?a.filter(this.createFilterSPDM(e)):a)},createFilterSPDM:function(e){return function(t){return 0===t.value.indexOf(e)}},querySearchARCMmembers:function(e,t){var a=this.arcMembers,r=!0,o=!1,n=void 0;try{for(var i,s=Z()(a);!(r=(i=s.next()).done);r=!0){var l=i.value;l.value=l.userId+"=>"+l.userName}}catch(e){o=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}t(e?a.filter(this.createFilterARC(e)):a)},createFilterARC:function(e){return function(t){return 0===t.value.indexOf(e)}},querySearchleaderMembers:function(e,t){var a=this.leaderMembers,r=!0,o=!1,n=void 0;try{for(var i,s=Z()(a);!(r=(i=s.next()).done);r=!0){var l=i.value;l.value=l.userId+"=>"+l.userName}}catch(e){o=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}t(e?a.filter(this.createFilterFGL(e)):a)},createFilterFGL:function(e){return function(t){return 0===t.value.indexOf(e)}},submitCreateProject:function(){var e=this;this.$refs.createProjectForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;l.a.post(d+"/project/create",u.a.stringify({cookie:p("byd_performance"),projectName:e.createProjectForm.projectName,spdmId:e.createProjectForm.spdmId.split("=>")[0],leaderId:e.createProjectForm.leaderId.split("=>")[0]})).then(function(t){0==t.data.code?(e.setProjectTable(),e.$message({message:"添加成功",type:"success"}),e.$refs.createProjectForm.resetFields(),e.dialogCreateProject=!1):(e.$message.error("添加失败"),e.setProjectTable())}).catch(function(e){console.log(e)})})},concelCreateProject:function(){void 0!==this.$refs.createProjectForm&&(this.$refs.createProjectForm.resetFields(),this.dialogCreateProject=!1)},changeSPDM:function(e,t){this.setProjectTable(),this.dialogEditSPDM=!0,this.editSPDMForm.projectName=t.featureGroupName},submitChangeSPDM:function(){var e=this;this.$refs.editSPDMForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;l.a.post(d+"/project/project-update-member",{cookie:p("byd_performance"),projectName:e.editSPDMForm.projectName,projectRole:"spdmMembers",memberData:[{userId:e.editSPDMForm.spdmId.split("=>")[0]}]}).then(function(t){0==t.data.code?(e.setProjectTable(),e.$message({message:"修改成功",type:"success"}),e.$refs.editSPDMForm.resetFields(),e.dialogEditSPDM=!1):(e.setProjectTable(),e.$message.error(t.data.message))}).catch(function(e){console.log(e)})})},concelChangeSPDM:function(){void 0!==this.$refs.editSPDMForm&&(this.$refs.editSPDMForm.resetFields(),this.dialogEditSPDM=!1)},changeARC:function(e,t){this.setProjectTable(),this.dialogEditARC=!0,this.editARCForm.projectName=t.featureGroupName},submitChangeARC:function(){var e=this;this.$refs.editARCForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;l.a.post(d+"/project/project-update-member",{cookie:p("byd_performance"),projectName:e.editARCForm.projectName,projectRole:"arcMembers",memberData:[{userId:e.editARCForm.ARCId.split("=>")[0]}]}).then(function(t){0==t.data.code?(e.setProjectTable(),e.$message({message:"修改成功",type:"success"}),e.$refs.editARCForm.resetFields(),e.dialogEditARC=!1):(e.setProjectTable(),e.$message.error(t.data.message))}).catch(function(e){console.log(e)})})},concelChangeARC:function(){void 0!==this.$refs.editARCForm&&(this.$refs.editARCForm.resetFields(),this.dialogEditARC=!1)},changeFGL:function(e,t){this.setProjectTable(),this.dialogEditFGL=!0,this.editFGLForm.projectName=t.featureGroupName},submitChangeFGL:function(){var e=this;this.$refs.editFGLForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;l.a.post(d+"/project/project-update-member",{cookie:p("byd_performance"),projectName:e.editFGLForm.projectName,projectRole:"leaderMembers",memberData:[{userId:e.editFGLForm.leaderId.split("=>")[0]}]}).then(function(t){0==t.data.code?(e.setProjectTable(),e.$message({message:"修改成功",type:"success"}),e.$refs.editFGLForm.resetFields(),e.dialogEditFGL=!1):(e.setProjectTable(),e.$message.error(t.data.message))}).catch(function(e){console.log(e)})})},concelChangeFGL:function(){void 0!==this.$refs.editFGLForm&&(this.$refs.editFGLForm.resetFields(),this.dialogEditFGL=!1)},changeFO:function(e,t){this.setProjectTable(),this.dialogEditFO=!0,this.editFOForm.projectName=t.featureGroupName,this.existedMembers=t.featureOwner},submitChangeFO:function(){var e=this;this.$refs.editFOForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;for(var a=[],r=0;r<e.existedMembers.length;r++)a.push({userId:e.existedMembers[r].userId});for(var o=0;o<e.editFOForm.featureOwnerId.length;o++)a.push({userId:e.editFOForm.featureOwnerId[o]});l.a.post(d+"/project/project-update-member",{cookie:p("byd_performance"),projectName:e.editFOForm.projectName,projectRole:"foMembers",memberData:a}).then(function(t){0==t.data.code?(e.setProjectTable(),e.$message({message:"修改成功",type:"success"}),e.$refs.editFOForm.resetFields(),e.dialogEditFO=!1):(e.setProjectTable(),e.$message.error(t.data.message))}).catch(function(e){console.log(e)})})},concelChangeFO:function(){void 0!==this.$refs.editFOForm&&(this.$refs.editFOForm.resetFields(),this.dialogEditFO=!1)},deleteMember:function(e,t){this.existedMembers.splice(e,1)},deleteProject:function(e,t){this.dialogDeleteProject=!0,this.deleteProjectForm=t.featureGroupName},confirmDeleteProject:function(){var e=this;l.a.post(d+"/project/delete-project",u.a.stringify({cookie:p("byd_performance"),projectName:this.deleteProjectForm})).then(function(t){0==t.data.code?(e.setProjectTable(),e.$message({message:"删除成功",type:"success"}),e.dialogDeleteProject=!1):(e.setProjectTable(),e.$message.error(t.data.message))}).catch(function(e){console.log(e)})},handlePageChange:function(e){this.currentPage=e},notes:function(){this.$message({showClose:!0,message:"项目角色具有唯一性，每个人只能担任一种角色",type:"warning"})}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project"},[a("el-button",{staticStyle:{margin:"2rem 0 1rem 0"},attrs:{type:"primary",round:"",icon:"el-icon-edit",size:"mini"},on:{click:e.createProject}},[e._v("\n            创建项目组\n    ")]),e._v(" "),a("el-input",{staticStyle:{width:"12rem"},attrs:{placeholder:"请输入项目名进行搜索",clearable:"",size:"mini","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchProjectData(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),0!=this.projectGroupData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.projectGroupData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:"","header-cell-style":{color:"#46a5fe"},algin:"center",fix:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",prop:"featureGroupName",label:"项目名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"featureGroupSPDM",label:"SPDM",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t.row.featureGroupSPDM?[a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("姓名:")]),e._v("\n                                    "+e._s(t.row.featureGroupSPDM.userName)+" \n                                ")],1),e._v(" "),a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("工号:")]),e._v("\n                                    "+e._s(t.row.featureGroupSPDM.userId)+"\n                                ")],1)]:e._e()],2),e._v(" "),a("el-tag",[e._v(e._s(t.row.featureGroupSPDM.userName?t.row.featureGroupSPDM.userName:"暂未设置"))])],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){e.changeSPDM(t.$index,t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"featureGroupARC",label:"ARC",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},["{}"!=JSON.stringify(t.row.featureGroupARC)?[a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("姓名:")]),e._v("\n                                    "+e._s(t.row.featureGroupARC.userName)+" \n                                ")],1),e._v(" "),a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("工号:")]),e._v("\n                                    "+e._s(t.row.featureGroupARC.userId)+"\n                                ")],1)]:e._e()],2),e._v(" "),a("el-tag",[e._v(e._s("{}"!=JSON.stringify(t.row.featureGroupARC)?t.row.featureGroupARC.userName:"未设置"))])],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){e.changeARC(t.$index,t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"featureGroupLeader",label:"FGL",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},["{}"!=JSON.stringify(t.row.featureGroupLeader)?[a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("姓名:")]),e._v("\n                                    "+e._s(t.row.featureGroupLeader.userName)+" \n                                ")],1),e._v(" "),a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("工号:")]),e._v("\n                                    "+e._s(t.row.featureGroupLeader.userId)+"\n                                ")],1)]:e._e()],2),e._v(" "),a("el-tag",[e._v(e._s("{}"!=JSON.stringify(t.row.featureGroupLeader)?t.row.featureGroupLeader.userName:"未设置"))])],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){e.changeFGL(t.$index,t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"featureOwner",label:"FO",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"right"}},[a("div",{staticStyle:{width:"10rem","max-height":"25rem","overflow-y":"scroll"},attrs:{slot:"content"},slot:"content"},[t.row.featureOwner?e._l(t.row.featureOwner,function(t,r){return a("div",{key:r},[a("div",[a("el-tag",{attrs:{size:"mini"}},[e._v("组员姓名")]),e._v("\n                                        "+e._s(t.userName)+"\n                                        "),a("el-tag",{attrs:{size:"mini"}},[e._v("组员工号")]),e._v("\n                                        "+e._s(t.userId)+"\n                                    ")],1)])}):e._e()],2),e._v(" "),a("el-tag",{attrs:{size:"primary"}},[e._v(e._s(0==t.row.featureOwner.length?"未设置":"组员信息"))])],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(a){e.changeFO(t.$index,t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"188"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.deleteProject(t.$index,t.row)}}},[e._v("删除项目组")])]}}])})],1):e._e(),e._v(" "),this.projectGroupData.length>7?a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pageChange",attrs:{"page-size":e.pageSize,"page-count":10,layout:"prev, pager, next",total:e.total,"current-page":e.currentPage},on:{"current-change":e.handlePageChange}})],1):e._e(),e._v(" "),[a("el-button",{staticStyle:{color:"#20a0ff","margin-top":"1rem"},attrs:{plain:!0,size:"small"},on:{click:e.notes}},[e._v("操作前提醒")])],e._v(" "),a("el-dialog",{attrs:{visible:e.dialogCreateProject,center:"",width:"25rem"},on:{"update:visible":function(t){e.dialogCreateProject=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("新建项目组")])]),e._v(" "),a("el-form",{ref:"createProjectForm",attrs:{model:e.createProjectForm,"status-icon":"","label-position":e.labelPosition,rules:e.rules,"label-width":"95px",size:"mini"}},[a("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"项目名",required:"",prop:"projectName"}},[a("el-input",{model:{value:e.createProjectForm.projectName,callback:function(t){e.$set(e.createProjectForm,"projectName",t)},expression:"createProjectForm.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"项目负责人",prop:"spdmId"}},[a("el-row",{staticClass:"demo-autocomplete"},[a("el-col",{attrs:{span:16}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearchSPDMmembers,placeholder:"请输入工号查找"},model:{value:e.createProjectForm.spdmId,callback:function(t){e.$set(e.createProjectForm,"spdmId",t)},expression:"createProjectForm.spdmId"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"功能组长",prop:"leaderId"}},[a("el-row",{staticClass:"demo-autocomplete"},[a("el-col",{attrs:{span:16}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearchleaderMembers,placeholder:"请输入工号查找"},model:{value:e.createProjectForm.leaderId,callback:function(t){e.$set(e.createProjectForm,"leaderId",t)},expression:"createProjectForm.leaderId"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right",margin:"0px auto"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitCreateProject}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.concelCreateProject}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogEditSPDM,center:"",width:"25rem"},on:{"update:visible":function(t){e.dialogEditSPDM=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("修改项目负责人")])]),e._v(" "),a("el-form",{ref:"editSPDMForm",attrs:{model:e.editSPDMForm,"status-icon":"","label-position":e.labelPosition,rules:e.rules,"label-width":"100px",size:"mini"}},[a("el-form-item",{staticStyle:{width:"90%"},attrs:{required:"",label:"项目负责人",prop:"spdmId"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearchSPDMmembers,placeholder:"请输入工号查找"},model:{value:e.editSPDMForm.spdmId,callback:function(t){e.$set(e.editSPDMForm,"spdmId",t)},expression:"editSPDMForm.spdmId"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right",margin:"0px auto"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitChangeSPDM}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.concelChangeSPDM}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogEditARC,center:"",width:"25rem"},on:{"update:visible":function(t){e.dialogEditARC=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("修改架构师")])]),e._v(" "),a("el-form",{ref:"editARCForm",attrs:{model:e.editARCForm,"label-position":e.labelPosition,"status-icon":"",rules:e.rules,"label-width":"100px",size:"mini"}},[a("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"项目架构师",required:"",prop:"ARCId"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearchARCMmembers,placeholder:"请输入工号查找"},model:{value:e.editARCForm.ARCId,callback:function(t){e.$set(e.editARCForm,"ARCId",t)},expression:"editARCForm.ARCId"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right",margin:"0px auto"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitChangeARC}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.concelChangeARC}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogEditFGL,center:"",width:"25rem"},on:{"update:visible":function(t){e.dialogEditFGL=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("修改功能组长")])]),e._v(" "),a("el-form",{ref:"editFGLForm",attrs:{model:e.editFGLForm,"label-position":e.labelPosition,"status-icon":"",rules:e.rules,"label-width":"100px",size:"mini"}},[a("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"功能组长",required:"",prop:"leaderId"}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearchleaderMembers,placeholder:"请输入工号查找"},model:{value:e.editFGLForm.leaderId,callback:function(t){e.$set(e.editFGLForm,"leaderId",t)},expression:"editFGLForm.leaderId"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right",margin:"0px auto"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitChangeFGL}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.concelChangeFGL}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogEditFO,center:"",width:"35rem"},on:{"update:visible":function(t){e.dialogEditFO=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("修改组员")])]),e._v(" "),0!=this.existedMembers.length?a("el-table",{staticStyle:{"margin-bottom":"1rem"},attrs:{data:e.existedMembers,border:"",size:"mini","header-cell-style":{color:"#46a5fe"},algin:"center",fix:"","max-height":"200"}},[a("el-table-column",{attrs:{align:"center",prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.deleteMember(t.$index,t.row)}}},[e._v("删除")])]}}])})],1):e._e(),e._v(" "),a("el-form",{ref:"editFOForm",attrs:{model:e.editFOForm,"label-position":e.labelPosition,"status-icon":"",rules:e.rules,"label-width":"100px",size:"mini"}},[a("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"添加成员",prop:"featureOwnerId"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{size:"small",multiple:"",filterable:"",placeholder:"请选择(可输入姓名或工号查找)"},model:{value:e.editFOForm.featureOwnerId,callback:function(t){e.$set(e.editFOForm,"featureOwnerId",t)},expression:"editFOForm.featureOwnerId"}},e._l(e.foMembers,function(e){return a("el-option",{key:e.userId,attrs:{label:"工号:"+e.userId+"=>姓名:"+e.userName,value:e.userId}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right",margin:"0px auto"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitChangeFO}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.concelChangeFO}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogDeleteProject,width:"20rem"},on:{"update:visible":function(t){e.dialogDeleteProject=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("删除项目")])]),e._v(" "),a("span",{staticStyle:{color:"#e6a23c","font-size":"1.2rem","text-align":"center"}},[e._v("您确定要删除该项目吗？")]),e._v(" "),a("span",{staticStyle:{"text-align":"right",margin:"0px auto"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.dialogDeleteProject=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.confirmDeleteProject}},[e._v("确 定")])],1)])],2)},staticRenderFns:[]};var te=a("VU/8")(K,ee,!1,function(e){a("P/Uy")},"data-v-091c8f0a",null).exports,ae={name:"PermissionManage",data:function(){var e=this;return{bossData:[],dialogEditBoss:!1,editBossForm:{bossId:""},bossSelectData:[],rules:{bossId:[{validator:function(t,a,r){if(!a)return r(new Error("未选择boss"));for(var o=0;o<e.bossData.length;o++)if(a==e.bossData[o].bossId)return r(new Error("该成员已经是boss"));r()},trigger:"blur"}]},tabMapOptions:[{label:"管理员",key:"Admin"},{label:"Boss",key:"Boss"},{label:"小组组长",key:"RTL"},{label:"架构师",key:"ARC"},{label:"项目负责人",key:"SPDM"},{label:"功能组长",key:"FGL"},{label:"项目成员",key:"FO"},{label:"游客",key:"Guest"}],activeName:"Admin",rolePermissionAllData:[],rolePermissionData:[]}},mounted:function(){this.setBossTable(),this.setRolePermission()},watch:{activeName:function(e){switch(e){case"Admin":this.rolePermissionData=this.rolePermissionAllData.Admin;break;case"Boss":this.rolePermissionData=this.rolePermissionAllData.Boss;break;case"ARC":this.rolePermissionData=this.rolePermissionAllData.ARC;break;case"SPDM":this.rolePermissionData=this.rolePermissionAllData.SPDM;break;case"FGL":this.rolePermissionData=this.rolePermissionAllData.FGL;break;case"RTL":this.rolePermissionData=this.rolePermissionAllData.RTL;break;case"FO":this.rolePermissionData=this.rolePermissionAllData.FO;break;case"Guest":this.rolePermissionData=this.rolePermissionAllData.Guest;break;default:this.$message.error("返回权限code错误")}}},methods:{setBossTable:function(){var e=this;l.a.get(d+"/boss/info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?(e.bossData=[],e.bossData.push(t.data.detail.bossData)):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},editBoss:function(e,t){var a=this;this.dialogEditBoss=!0,l.a.get(d+"/group/optional-user",{params:{cookie:p("byd_performance")}}).then(function(e){0==e.data.code?a.bossSelectData=e.data.detail.leaderSelectData:a.$message.error(e.data.message)}).catch(function(e){console.log(e)})},submitBossForm:function(){var e=this;this.$refs.editBossForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;l.a.post(d+"/boss/update",{cookie:p("byd_performance"),bossId:e.editBossForm.bossId}).then(function(t){0==t.data.code?(e.setBossTable(),e.$message({message:"修改成功",type:"success"}),e.$refs.editBossForm.resetFields(),e.dialogEditBoss=!1):(e.$message.error(t.data.message),e.setBossTable())}).catch(function(e){console.log(e)})})},concelBossForm:function(){void 0!==this.$refs.editBossForm&&(this.$refs.editBossForm.resetFields(),this.dialogEditBoss=!1)},setRolePermission:function(){var e=this;l.a.get(d+"/Validation/Setting",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?(e.activeName="Admin",e.rolePermissionAllData=t.data.detail,e.rolePermissionData=e.rolePermissionAllData.Admin):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},modifyPermission:function(){var e=this;l.a.post(d+"/Validation/updateSetting",{cookie:p("byd_performance"),roleName:this.activeName,rolePermission:this.rolePermissionData}).then(function(t){0==t.data.code?(e.setRolePermission(),e.$message({message:"修改成功",type:"success"})):(e.setRolePermission(),e.$message.error(t.data.message))}).catch(function(e){console.log(e)})},notes:function(){this.$message({showClose:!0,message:"更改权限后需用右边按钮提交方可生效哦",type:"warning"})}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role"},[a("el-button",{staticStyle:{margin:"2rem 0 1rem 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n            BOSS设置\n    ")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bossData,size:"mini",border:"","header-cell-style":{color:"#46a5fe"},algin:"center",fix:""}},[a("el-table-column",{attrs:{align:"center",prop:"bossId",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bossName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.editBoss(t.$index,t.row)}}},[e._v("设置")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"修改BOSS",visible:e.dialogEditBoss,center:"",width:"25rem"},on:{"update:visible":function(t){e.dialogEditBoss=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("span",{staticStyle:{color:"#20a0ff"}},[e._v("BOSS设置")])]),e._v(" "),a("el-form",{ref:"editBossForm",attrs:{model:e.editBossForm,rules:e.rules,"status-icon":"","label-width":"90px",size:"mini"}},[a("el-form-item",{attrs:{label:"修改Boss",prop:"bossId"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{size:"mini",filterable:"",clearable:"",placeholder:"请选择(可输入姓名或工号查找)"},model:{value:e.editBossForm.bossId,callback:function(t){e.$set(e.editBossForm,"bossId",t)},expression:"editBossForm.bossId"}},e._l(e.bossSelectData,function(e){return a("el-option",{key:e.leaderId,attrs:{label:"工号:"+e.leaderId+"=>姓名:"+e.leader,value:e.leaderId}})}))],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"right",margin:"0px auto"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitBossForm}},[e._v("提交")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.concelBossForm}},[e._v("取消")])],1)],1)],1),e._v(" "),a("div",[a("el-button",{staticStyle:{margin:"1rem 0 0 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n                角色权限设置\n        ")]),e._v(" "),a("div",{staticClass:"tab-container"},[a("el-tabs",{staticStyle:{margin:"1rem"},attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabMapOptions,function(t){return a("el-tab-pane",{key:t.key,attrs:{label:t.label,name:t.key}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolePermissionData,border:"",fit:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",label:"个人页面"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{disabled:"","active-value":"100","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.PersonalPage,callback:function(a){e.$set(t.row,"PersonalPage",a)},expression:"scope.row.PersonalPage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{disabled:"","active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.PersonalPage,callback:function(a){e.$set(t.row,"PersonalPage",a)},expression:"scope.row.PersonalPage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"绩效填写"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{"active-value":"200","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.BeReviewedPage,callback:function(a){e.$set(t.row,"BeReviewedPage",a)},expression:"scope.row.BeReviewedPage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.BeReviewedPage,callback:function(a){e.$set(t.row,"BeReviewedPage",a)},expression:"scope.row.BeReviewedPage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"小组考核"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{"active-value":"300","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.LeaderReviewPage,callback:function(a){e.$set(t.row,"LeaderReviewPage",a)},expression:"scope.row.LeaderReviewPage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.LeaderReviewPage,callback:function(a){e.$set(t.row,"LeaderReviewPage",a)},expression:"scope.row.LeaderReviewPage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"项目考核"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{"active-value":"400","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.ProjectReviewPage,callback:function(a){e.$set(t.row,"ProjectReviewPage",a)},expression:"scope.row.ProjectReviewPage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.ProjectReviewPage,callback:function(a){e.$set(t.row,"ProjectReviewPage",a)},expression:"scope.row.ProjectReviewPage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"项目Schedule",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{"active-value":"901","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.ProjectSchedulePage,callback:function(a){e.$set(t.row,"ProjectSchedulePage",a)},expression:"scope.row.ProjectSchedulePage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.ProjectSchedulePage,callback:function(a){e.$set(t.row,"ProjectSchedulePage",a)},expression:"scope.row.ProjectSchedulePage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"小组管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{"active-value":"500","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.GroupManagePage,callback:function(a){e.$set(t.row,"GroupManagePage",a)},expression:"scope.row.GroupManagePage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.GroupManagePage,callback:function(a){e.$set(t.row,"GroupManagePage",a)},expression:"scope.row.GroupManagePage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"项目管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{"active-value":"600","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.ProjectManagePage,callback:function(a){e.$set(t.row,"ProjectManagePage",a)},expression:"scope.row.ProjectManagePage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.ProjectManagePage,callback:function(a){e.$set(t.row,"ProjectManagePage",a)},expression:"scope.row.ProjectManagePage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"用户管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{"active-value":"700","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.UserManagePage,callback:function(a){e.$set(t.row,"UserManagePage",a)},expression:"scope.row.UserManagePage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.UserManagePage,callback:function(a){e.$set(t.row,"UserManagePage",a)},expression:"scope.row.UserManagePage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"权限管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{"active-value":"800","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.PermissionManagePage,callback:function(a){e.$set(t.row,"PermissionManagePage",a)},expression:"scope.row.PermissionManagePage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.PermissionManagePage,callback:function(a){e.$set(t.row,"PermissionManagePage",a)},expression:"scope.row.PermissionManagePage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"考核控制"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-switch",{attrs:{"active-value":"900","inactive-value":null,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.TimeSettingPage,callback:function(a){e.$set(t.row,"TimeSettingPage",a)},expression:"scope.row.TimeSettingPage"}}):e._e(),e._v(" "),1==t.$index?a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#eaecf0"},model:{value:t.row.TimeSettingPage,callback:function(a){e.$set(t.row,"TimeSettingPage",a)},expression:"scope.row.TimeSettingPage"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"修改权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.$index?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.modifyPermission}},[e._v("页面权限")]):e._e(),e._v(" "),1==t.$index?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.modifyPermission}},[e._v("操作权限")]):e._e()]}}])})],1),e._v(" "),[a("el-button",{staticStyle:{color:"#20a0ff","margin-top":"1rem"},attrs:{plain:!0,size:"small"},on:{click:e.notes}},[e._v("操作前提醒")])]],2)}))],1)],1)],1)},staticRenderFns:[]};var oe=a("VU/8")(ae,re,!1,function(e){a("EXNR")},"data-v-1f334f09",null).exports,ne=a("mvHQ"),ie=a.n(ne),se={name:"TimeSetting",data:function(){return{value1:"",monthData:"",openSwitch:!1,pickerSwicth:!1,monthPickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()-2592e6},shortcuts:[{text:"本月",onClick:function(e){e.$emit("pick",new Date)}},{text:"上月",onClick:function(e){var t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",t)}}]},FoWeightData:[],FGLWeightData:[],SPDM_ARCWeightData:[],RTLWeightData:[]}},mounted:function(){this.updateState(),this.setWeightTable()},methods:{reviewController:function(){var e=this;this.monthData?(this.$router.go(0),l.a.post(d+"/scored-mode/setting",u.a.stringify({cookie:p("byd_performance"),scoreTime:this.monthData.substring(0,7),state:this.openSwitch})).then(function(t){0==t.data.code?(e.pickerSwicth=!e.pickerSwicth,e.$message({message:"操作成功",type:"success"})):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})):(this.openSwitch=!1,this.$message.error("未选择考核开启月份"))},updateState:function(){var e=this;l.a.get(d+"/scored-mode/scored-state-turn-on",{params:{cookie:p("byd_performance")}}).then(function(t){"{}"!=ie()(t.data.detail.scored_turn_on)?(e.monthData=t.data.detail.scored_turn_on.scoredTime,e.pickerSwicth=!0,e.openSwitch=!0,e.$message({message:e.monthData.substring(0,7)+"考核已开启",type:"success"})):(e.pickerSwicth=!1,e.monthData="",e.openSwitch=!1)}).catch(function(e){console.log(e)})},setWeightTable:function(){var e=this;l.a.get(d+"/score-weight/all",{params:{cookie:p("byd_performance")}}).then(function(t){if(0==t.data.code){var a=t.data.detail.weightDetail;a.map(function(t){return e.$set(t,"edit",!1),t}),e.FoWeightData=[],e.FGLWeightData=[],e.SPDM_ARCWeightData=[],e.RTLWeightData=[],e.FoWeightData.push(a[0]),e.FGLWeightData.push(a[1]),e.SPDM_ARCWeightData.push(a[2]),e.RTLWeightData.push(a[3])}else e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},confirmEditFO:function(e){var t=this;e.FGL_SCORING_FO+e.FO_SCORING_MYSELF+e.RTL_SCORING_FO==100?l.a.post(d+"/score-weight/update-weight1",u.a.stringify({cookie:p("byd_performance"),RTL_SCORING_FO:e.RTL_SCORING_FO,FGL_SCORING_FO:e.FGL_SCORING_FO,FO_SCORING_MYSELF:e.FO_SCORING_MYSELF})).then(function(e){0==e.data.code?(t.FoWeightData[0].edit=!1,t.setWeightTable(),t.$message({message:"修改成功",type:"success"})):(t.FoWeightData[0].edit=!0,t.setWeightTable(),t.$message.error(e.data.message))}).catch(function(e){console.log(e)}):(this.$message.error("总权重不等于100，请重新修改"),this.FoWeightData[0].edit=!0)},confirmEditFGL:function(e){var t=this;e.RTL_SCORING_FGL+e.SPDM_SCORING_FGL+e.FGL_SCORING_MYSELF==100?l.a.post(d+"/score-weight/update-weight2",u.a.stringify({cookie:p("byd_performance"),RTL_SCORING_FGL:e.RTL_SCORING_FGL,SPDM_SCORING_FGL:e.SPDM_SCORING_FGL,FGL_SCORING_MYSELF:e.FGL_SCORING_MYSELF})).then(function(e){0==e.data.code?(t.FGLWeightData[0].edit=!1,t.setWeightTable(),t.$message({message:"修改成功",type:"success"})):(t.FGLWeightData[0].edit=!0,t.setWeightTable(),t.$message.error(e.data.message))}).catch(function(e){console.log(e)}):(this.$message.error("总权重不等于100，请重新修改"),this.FGLWeightData.edit=!0)},confirmEditSPDM:function(e){var t=this;e.RTL_SCORING_SPDM_OR_ARC+e.SPDM_OR_ARC_SCORING_MYSELF==100?l.a.post(d+"/score-weight/update-weight3",u.a.stringify({cookie:p("byd_performance"),RTL_SCORING_SPDM_OR_ARC:e.RTL_SCORING_SPDM_OR_ARC,SPDM_OR_ARC_SCORING_MYSELF:e.SPDM_OR_ARC_SCORING_MYSELF})).then(function(e){0==e.data.code?(t.SPDM_ARCWeightData[0].edit=!1,t.setWeightTable(),t.$message({message:"修改成功",type:"success"})):(t.SPDM_ARCWeightData[0].edit=!0,t.setWeightTable(),t.$message.error(e.data.message))}).catch(function(e){console.log(e)}):(this.$message.error("总权重不等于100，请重新修改"),this.SPDM_ARCWeightData.edit=!0)},confirmEditRTL:function(e){var t=this;e.BOSS_SCORING_RTL+e.GROUP_MEMBER_AVG==100?l.a.post(d+"/score-weight/update-weight4",u.a.stringify({cookie:p("byd_performance"),BOSS_SCORING_RTL:e.BOSS_SCORING_RTL,GROUP_MEMBER_AVG:e.GROUP_MEMBER_AVG})).then(function(e){0==e.data.code?(t.RTLWeightData[0].edit=!1,t.setWeightTable(),t.$message({message:"修改成功",type:"success"})):(t.RTLWeightData[0].edit=!0,t.setWeightTable(),t.$message.error(e.data.message))}).catch(function(e){console.log(e)}):(this.$message.error("总权重不等于100，请重新修改"),this.RTLWeightData.edit=!0)}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"controller"},[a("el-button",{staticStyle:{margin:"1rem 0 0 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n            考核时间设置\n    ")]),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("选择考核月份:")]),e._v(" "),a("el-date-picker",{attrs:{type:"month",size:"mini",disabled:e.pickerSwicth,placeholder:"请选择月份","value-format":"yyyy-MM-dd","picker-options":e.monthPickerOptions},model:{value:e.monthData,callback:function(t){e.monthData=t},expression:"monthData"}}),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("是否开启考核:")]),e._v(" "),a("el-switch",{attrs:{"active-text":"开启考核","inactive-text":"关闭考核"},on:{change:e.reviewController},model:{value:e.openSwitch,callback:function(t){e.openSwitch=t},expression:"openSwitch"}})],1),e._v(" "),a("div",[0!=this.FoWeightData.length?a("el-button",{staticStyle:{margin:"1rem 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n                FO权重设置\n        ")]):e._e(),e._v(" "),0!=this.FoWeightData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#46a5fe"},algin:"center",fix:"",border:"",size:"mini",data:e.FoWeightData}},[a("el-table-column",{attrs:{align:"center",label:"RTL评分权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.RTL_SCORING_FO,callback:function(a){e.$set(t.row,"RTL_SCORING_FO",e._n(a))},expression:"scope.row.RTL_SCORING_FO"}})]:a("span",[e._v(e._s(t.row.RTL_SCORING_FO))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"FGL评分权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.FGL_SCORING_FO,callback:function(a){e.$set(t.row,"FGL_SCORING_FO",e._n(a))},expression:"scope.row.FGL_SCORING_FO"}})]:a("span",[e._v(e._s(t.row.FGL_SCORING_FO))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"个人项目完成度"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.FO_SCORING_MYSELF,callback:function(a){e.$set(t.row,"FO_SCORING_MYSELF",e._n(a))},expression:"scope.row.FO_SCORING_MYSELF"}})]:a("span",[e._v(e._s(t.row.FO_SCORING_MYSELF))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(a){e.confirmEditFO(t.row)}}},[e._v("提交")]):a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("修改")])]}}])})],1):e._e(),e._v(" "),0!=this.FGLWeightData.length?a("el-button",{staticStyle:{margin:"1rem 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n                FGL权重设置\n        ")]):e._e(),e._v(" "),0!=this.FGLWeightData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#46a5fe"},algin:"center",fix:"",border:"",size:"mini",data:e.FGLWeightData}},[a("el-table-column",{attrs:{align:"center",label:"RTL评分权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.RTL_SCORING_FGL,callback:function(a){e.$set(t.row,"RTL_SCORING_FGL",e._n(a))},expression:"scope.row.RTL_SCORING_FGL"}})]:a("span",[e._v(e._s(t.row.RTL_SCORING_FGL))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"SPDM评分权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.SPDM_SCORING_FGL,callback:function(a){e.$set(t.row,"SPDM_SCORING_FGL",e._n(a))},expression:"scope.row.SPDM_SCORING_FGL"}})]:a("span",[e._v(e._s(t.row.SPDM_SCORING_FGL))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"个人项目完成度"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.FGL_SCORING_MYSELF,callback:function(a){e.$set(t.row,"FGL_SCORING_MYSELF",e._n(a))},expression:"scope.row.FGL_SCORING_MYSELF"}})]:a("span",[e._v(e._s(t.row.FGL_SCORING_MYSELF))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(a){e.confirmEditFGL(t.row)}}},[e._v("提交")]):a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("修改")])]}}])})],1):e._e(),e._v(" "),0!=this.SPDM_ARCWeightData.length?a("el-button",{staticStyle:{margin:"1rem 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n                SPDM/ARC权重设置\n        ")]):e._e(),e._v(" "),0!=this.SPDM_ARCWeightData.length?a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{color:"#46a5fe"},algin:"center",fix:"",border:"",size:"mini",data:e.SPDM_ARCWeightData}},[a("el-table-column",{attrs:{align:"center",label:"RTL评分权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.RTL_SCORING_SPDM_OR_ARC,callback:function(a){e.$set(t.row,"RTL_SCORING_SPDM_OR_ARC",e._n(a))},expression:"scope.row.RTL_SCORING_SPDM_OR_ARC"}})]:a("span",[e._v(e._s(t.row.RTL_SCORING_SPDM_OR_ARC))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"总项目完成度"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.SPDM_OR_ARC_SCORING_MYSELF,callback:function(a){e.$set(t.row,"SPDM_OR_ARC_SCORING_MYSELF",e._n(a))},expression:"scope.row.SPDM_OR_ARC_SCORING_MYSELF"}})]:a("span",[e._v(e._s(t.row.SPDM_OR_ARC_SCORING_MYSELF))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(a){e.confirmEditSPDM(t.row)}}},[e._v("提交")]):a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("修改")])]}}])})],1):e._e(),e._v(" "),0!=this.RTLWeightData.length?a("el-button",{staticStyle:{margin:"1rem 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n                RTL权重设置\n        ")]):e._e(),e._v(" "),0!=this.RTLWeightData.length?a("el-table",{staticStyle:{width:"100%",bottom:"1rem"},attrs:{"header-cell-style":{color:"#46a5fe"},algin:"center",fix:"",border:"",size:"mini",data:e.RTLWeightData}},[a("el-table-column",{attrs:{align:"center",label:"BOSS评分权重"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.BOSS_SCORING_RTL,callback:function(a){e.$set(t.row,"BOSS_SCORING_RTL",e._n(a))},expression:"scope.row.BOSS_SCORING_RTL"}})]:a("span",[e._v(e._s(t.row.BOSS_SCORING_RTL))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:" Team项目平均完成度"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"50%"},attrs:{size:"small",type:"number"},model:{value:t.row.GROUP_MEMBER_AVG,callback:function(a){e.$set(t.row,"GROUP_MEMBER_AVG",e._n(a))},expression:"scope.row.GROUP_MEMBER_AVG"}})]:a("span",[e._v(e._s(t.row.GROUP_MEMBER_AVG))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(a){e.confirmEditRTL(t.row)}}},[e._v("提交")]):a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("修改")])]}}])})],1):e._e()],1)],1)},staticRenderFns:[]};var ce=a("VU/8")(se,le,!1,function(e){a("HOXm")},"data-v-1ffc2524",null).exports,ue={name:"UserManage",data:function(){return{fileList:[],downLoadURL:d+"/static/image/template.xlsx",oldUserInfo:[],userInfo:[],keywords:"",selectData:[],total:0,pageSize:7,currentPage:1}},mounted:function(){this.setUserInfo()},watch:{keywords:function(e,t){this.userInfo=this.oldUserInfo.filter(function(t){return~t.userName.indexOf(e)||~t.userId.indexOf(e)}),this.total=this.userInfo.length}},computed:{searchUserData:function(){(this.keywords="")&&(this.userInfo=this.oldUserInfo,this.total=this.userInfo.length)}},methods:{uploadUrl:function(){return d+"/userManagement/excelParse"},getCookie:function(){return{cookie:p("byd_performance")}},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){},handleSucces:function(e,t,a){0==e.code?(this.userInfo=e.detail.allUserInfo,this.total=e.detail.allUserInfo.length,this.$message({message:"成员添加成功",type:"success"})):this.$message.error(e.message)},setUserInfo:function(){var e=this;l.a.get(d+"/userManagement/query",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?(e.userInfo=t.data.detail.allUserInfo,e.oldUserInfo=t.data.detail.allUserInfo,e.total=t.data.detail.allUserInfo.length):e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},handlePageChange:function(e){this.currentPage=e},deleteVolumeUser:function(){for(var e=this,t=[],a=0;a<this.selectData.length;a++)t.push({userId:this.selectData.map(function(e,t){return e.userId})[a]});l.a.post(d+"/userManagement/deleteUser",{cookie:p("byd_performance"),groupData:t}).then(function(t){0==t.data.code?(e.setUserInfo(),e.$message({message:"删除成功",type:"success"})):(e.$message.error(t.data.message),e.setUserInfo())}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.selectData=e},resetPassword:function(e,t){var a=this;l.a.post(d+"/login/resetPassword",u.a.stringify({cookie:p("byd_performance"),userId:t.userId})).then(function(e){0==e.data.code?(a.setUserInfo(),a.$message({message:"重置成功",type:"success"})):(a.$message.error(e.data.message),a.setUserInfo())}).catch(function(e){console.log(e)})}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-control"},[a("el-upload",{ref:"upload",staticStyle:{"margin-top":"2rem","margin-bottom":"0.5rem"},attrs:{data:e.getCookie(),action:e.uploadUrl(),"on-remove":e.handleRemove,"on-success":e.handleSucces,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("批量上传用户")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"success"},on:{click:e.submitUpload}},[e._v("确认上传")]),e._v(" "),a("div",{staticClass:"upload-template"},[a("a",{staticClass:"link",attrs:{href:e.downLoadURL}},[e._v("Downlaod Template")])])],1),e._v(" "),a("el-button",{staticStyle:{margin:"1rem 0 1rem 0"},attrs:{type:"primary",round:"",size:"mini"}},[e._v("\n            用户列表\n        ")]),e._v(" "),a("el-input",{staticStyle:{width:"14rem"},attrs:{placeholder:"输入工号或者姓名进行搜索",clearable:"",size:"mini","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchUserData(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),0!=this.userInfo.length?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userInfo.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),size:"mini",border:"",fix:"","header-cell-style":{color:"#46a5fe"},"max-height":"400"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"30"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userId",label:"工号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"userName",label:"姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"groupName",label:"小组名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"groupRole",label:"小组角色",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"projectInfo",label:"项目角色"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.projectInfo,function(r,o){return 0!=t.row.projectInfo.length?a("el-tag",{key:o,attrs:{size:"mini"}},[e._v("\n                        "+e._s(r.projectName+":"+r.projectRole)+"\n                    ")]):e._e()})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"重置密码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.resetPassword(t.$index,t.row)}}},[e._v("重置")])]}}])})],1):e._e(),e._v(" "),a("div",{staticClass:"footer"},[0!=this.userInfo.length?a("el-button",{staticClass:"userDelete",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.deleteVolumeUser()}}},[e._v("批量删除")]):e._e(),e._v(" "),this.userInfo.length>7?a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"pageChange",attrs:{"page-size":e.pageSize,"page-count":10,layout:"prev, pager, next",total:e.total,"current-page":e.currentPage},on:{"current-change":e.handlePageChange}})],1):e._e()],1)],1)},staticRenderFns:[]};var me=a("VU/8")(ue,de,!1,function(e){a("2Fpf")},"data-v-69036d40",null).exports,pe=(a("iSmP"),{name:"gantt",props:{tasks:{type:Object,default:function(){return{data:[],projectName:""}}}},watch:{tasks:{handler:function(e){var t=this;setTimeout(function(){gantt.clearAll(t.$refs.gantt),gantt.parse(t.$props.tasks)},2e3)},deep:!0}},methods:{$_initGanttEvents:function(){var e=this;gantt.$_eventsInitialized||(gantt.attachEvent("onTaskSelected",function(t){var a=gantt.getTask(t);e.$emit("task-selected",a)}),gantt.attachEvent("onAfterTaskAdd",function(t,a){a.progress=a.progress||0,e.$emit("task-updated",t,"inserted",a),gantt.getSelectedId()==t&&e.$emit("task-selected",a)}),gantt.attachEvent("onAfterTaskUpdate",function(t,a){a.progress=a.progress||0,e.$emit("task-updated",t,"updated",a),gantt.getSelectedId()==t&&e.$emit("task-selected",a)}),gantt.attachEvent("onAfterTaskDelete",function(t){e.$emit("task-updated",t,"deleted"),gantt.getSelectedId()||e.$emit("task-selected",null)}),gantt.$_eventsInitialized=!0)}},mounted:function(){this.$_initGanttEvents(),gantt.init(this.$refs.gantt),gantt.parse(this.$props.tasks)}}),ge={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"gantt"})},staticRenderFns:[]};var fe=a("VU/8")(pe,ge,!1,function(e){a("HT/c")},null,null).exports,he=(a("gWZU"),{name:"Schedule",components:{Gantt:fe},data:function(){return{schedule:[],tasks:{data:[],projectName:""},taskState:!1,selectedTask:null}},filters:{toPercent:function(e){return e?Math.round(100*+e):"0"},niceDate:function(e){return e.getFullYear()+" / "+(e.getMonth()+1)+" / "+e.getDate()}},mounted:function(){this.initSchedule()},methods:{selectTask:function(e){this.selectedTask=e},logTaskUpdate:function(e,t,a){var r=this;"updated"==t||"inserted"==t?l.a.post(d+"/schedule/save",u.a.stringify({cookie:p("byd_performance"),projectName:this.tasks.projectName,id:a.id,text:a.text,start_date:a.start_date.getDate()+"-"+(a.start_date.getMonth()+1)+"-"+a.start_date.getFullYear(),duration:a.duration,progress:a.progress})).then(function(e){0==e.data.code?(r.initSchedule(),r.$message({message:"更新成功",type:"success"})):r.$message.error(e.data.message)}).catch(function(e){console.log(e)}):"deleted"==t&&l.a.post(d+"/schedule/delete",u.a.stringify({cookie:p("byd_performance"),id:e})).then(function(e){0==e.data.code?(r.initSchedule(),r.$message({message:"删除成功",type:"success"})):r.$message.error(e.data.message)}).catch(function(e){console.log(e)})},logLinkUpdate:function(e,t,a){},initSchedule:function(){var e=this;l.a.get(d+"/schedule/info",{params:{cookie:p("byd_performance")}}).then(function(t){0==t.data.code?e.schedule=t.data.detail.schedule:e.$message.error(t.data.message)}).catch(function(e){console.log(e)})},initTaskData:function(e){this.tasks.data=e.tasks,this.tasks.projectName=e.projectName},notes:function(){this.$message({showClose:!0,message:"请点击切换到对应项目进行任务的创建/更新/删除，任务更改后会弹出提示，如无提示请刷新页面重试",type:"warning"})}}}),ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"projectList"},e._l(e.schedule,function(t){return a("el-button",{key:t.index,staticStyle:{margin:"1rem 1rem 1rem 0"},attrs:{type:"primary",round:"",size:"mini"},on:{click:function(a){e.initTaskData(t)}}},[e._v("\n             "+e._s(t.projectName)+"\n    ")])})),e._v(" "),a("div",{staticClass:"container"},[e.tasks.data!=[]?a("div",{staticClass:"right-container"},[a("div",{staticClass:"gantt-selected-info",staticStyle:{"padding-left":"1rem"}},[e.selectedTask?a("div",[a("h3",[e._v(e._s(e.selectedTask.text))]),e._v(" "),a("span",[a("b",[e._v("任务ID: ")]),e._v(e._s(e.selectedTask.id))]),a("br"),e._v(" "),a("span",[a("b",[e._v("进度: ")]),e._v(e._s(e._f("toPercent")(e.selectedTask.progress))+"%")]),a("br"),e._v(" "),a("span",[a("b",[e._v("开始时间: ")]),e._v(e._s(e._f("niceDate")(e.selectedTask.start_date)))]),a("br"),e._v(" "),a("span",[a("b",[e._v("结束时间: ")]),e._v(e._s(e._f("niceDate")(e.selectedTask.end_date)))]),a("br")]):a("div",{staticClass:"select-task-prompt"},[a("h4",{staticStyle:{color:"#a6a6a6"}},[e._v("点击项目组和任务栏显示详情")])])])]):e._e(),e._v(" "),e.tasks.data!=[]?a("gantt",{staticClass:"left-container",attrs:{tasks:e.tasks},on:{"task-updated":e.logTaskUpdate,"link-updated":e.logLinkUpdate,"task-selected":e.selectTask}}):e._e()],1),e._v(" "),a("el-button",{staticStyle:{color:"#20a0ff"},attrs:{plain:!0,size:"small"},on:{click:e.notes}},[e._v("操作前提醒")])],1)},staticRenderFns:[]};var be=a("VU/8")(he,ve,!1,function(e){a("BKLM")},null,null).exports,_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"error-page"},[e._m(0),e._v(" "),a("div",{staticClass:"error-desc"},[e._v("啊哦~ 你所访问的页面不存在")]),e._v(" "),a("div",{staticClass:"error-handle"},[a("router-link",{attrs:{to:"/"}},[a("el-button",{attrs:{type:"primary",size:"large"}},[e._v("返回首页")])],1),e._v(" "),a("el-button",{staticClass:"error-btn",attrs:{type:"primary",size:"large"},on:{click:e.goBack}},[e._v("返回上一页")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"error-code"},[this._v("4"),t("span",[this._v("0")]),this._v("4")])}]};var we=a("VU/8")({name:"ErrorPage",methods:{goBack:function(){this.$router.go(-1)}}},_e,!1,function(e){a("qXeo")},"data-v-1a543eee",null).exports,ye={name:"Password",data:function(){var e=this;return{ruleForm:{pass:"",newpass:"",checknewpass:""},rules:{pass:[{required:!0,message:"请输入密码"}],newpass:[{required:!0,message:"请输入新密码"}],checknewpass:[{required:!0,validator:function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.ruleForm.newpass?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]}}},methods:{submitPassword:function(e){var t=this;this.$refs.ruleForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;l.a.post(d+"/login/changePassword",u.a.stringify({cookie:p("byd_performance"),oldPassword:t.ruleForm.pass,newPassword:t.ruleForm.newpass})).then(function(e){0==e.data.code?(t.$message({message:"密码修改成功",type:"success"}),t.$router.push("/personal")):(t.$message.error(e.data.message),t.ruleForm.pass="",t.ruleForm.newpass="",t.ruleForm.checknewpass="")}).catch(function(e){console.log(e)})})}}},Se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"20%","margin-left":"40%","margin-top":"50px"}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"原密码",prop:"pass"}},[a("el-input",{attrs:{placeholder:"请输入原密码",type:"password"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newpass"}},[a("el-input",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:e.ruleForm.newpass,callback:function(t){e.$set(e.ruleForm,"newpass",t)},expression:"ruleForm.newpass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重复新密码",prop:"checknewpass"}},[a("el-input",{attrs:{placeholder:"请再次输入新密码",type:"password"},model:{value:e.ruleForm.checknewpass,callback:function(t){e.$set(e.ruleForm,"checknewpass",t)},expression:"ruleForm.checknewpass"}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-left":"75%"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitPassword}},[e._v("提交")])],1)],1)},staticRenderFns:[]};var ke=a("VU/8")(ye,Se,!1,function(e){a("2gkO")},"data-v-1113634e",null).exports,Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"error-page"},[e._m(0),e._v(" "),a("div",{staticClass:"error-desc"},[e._v("啊哦~ 你没有权限访问该页面哦")]),e._v(" "),a("div",{staticClass:"error-handle"},[a("router-link",{attrs:{to:"/"}},[a("el-button",{attrs:{type:"primary",size:"large"}},[e._v("返回首页")])],1),e._v(" "),a("el-button",{staticClass:"error-btn",attrs:{type:"primary",size:"large"},on:{click:e.goBack}},[e._v("返回上一页")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"error-code"},[this._v("4"),t("span",[this._v("0")]),this._v("3")])}]};var Re=a("VU/8")({name:"NoPermissionPage",methods:{goBack:function(){this.$router.go(-1)}}},Fe,!1,function(e){a("uGeG")},"data-v-ee15352e",null).exports;r.default.use(i.a);var De=[{path:"/",name:"Login",component:v},{path:"/home",name:"Home",component:C,children:[]},{path:"/password",name:"Password",component:ke},{path:"/403",name:"NoPermissionPage",component:Re}],Pe=new i.a({routes:De}),Ge=[{path:"/home",name:"Home",component:C,children:[{path:"/personal",name:"Personal",component:j,role:["100"],icon:"el-icon-info",index:"personal",title:"个人首页"},{path:"/bereview",name:"BeReview",component:$,role:["200"],icon:"el-icon-edit",index:"bereview",title:"绩效填写"},{path:"/leaderReview",name:"LeaderReview",component:N,role:["300"],icon:"el-icon-message",index:"leaderReview",title:"小组考核"},{path:"/projectReview",name:"ProjectReview",component:T,role:["400"],icon:"el-icon-edit-outline",index:"projectReview",title:"项目考核"},{path:"/schedule",name:"Schedule",component:be,role:["901"],icon:"el-icon-news",index:"schedule",title:"Schedule"},{path:"/groupManage",name:"GroupManage",component:X,role:["500"],icon:"el-icon-rank",index:"GroupManage",title:"小组管理"},{path:"/projectManage",name:"ProjectManage",component:te,role:["600"],icon:"el-icon-refresh",index:"ProjectManage",title:"项目管理"},{path:"/UserManage",name:"UserManage",component:me,role:["700"],icon:"el-icon-setting",index:"UserManage",title:"用户管理"},{path:"/permissionManage",name:"PermissionManage",component:oe,role:["800"],icon:"el-icon-star-on",index:"permissionManage",title:"权限管理"},{path:"/TimeSetting",name:"TimeSetting",component:ce,role:["900"],icon:"el-icon-time",index:"TimeSetting",title:"考核控制"}]},{path:"*",name:"ErrorPage",component:we}],Ce=a("zL8q"),Me=a.n(Ce),Ie=(a("tvR6"),a("uMhA"),a("lf9d"),a("//Fk")),je=a.n(Ie),Le={state:{roles:[]},mutations:{SET_ROLES:function(e,t){e.roles=t}},actions:{GetUserInfo:function(e){var t=e.commit;return new je.a(function(e,a){l.a.get(d+"/Validation/roleInfo",{params:{cookie:p("byd_performance")}}).then(function(r){var o=r.data;0==o.code&&o.detail.role.length>0?t("SET_ROLES",o.detail.role):0==o.detail.role.length?a("getInfo: role must be a non-null array !"):alert(r.data.message),e(r)}).catch(function(e){a(e)})})},LogOut:function(e,t){var a=e.commit;return new je.a(function(e,r){l.a.get(d+"/login/logout",{params:{cookie:p("byd_performance")}}).then(function(r){0==r.data.code?(a("SET_ROLES",[]),g("byd_performance"),t.$router.push("/")):alert(r.data.message),e()}).catch(function(e){r(e)})})}}};var xe={state:{routers:De,addRouters:[]},mutations:{SET_ROUTERS:function(e,t){e.addRouters=t,e.routers=De[1].children.concat(t)}},actions:{GenerateRoutes:function(e,t){var a=e.commit;return new je.a(function(e){var r=t,o=void 0;o=r.indexOf("admin")>=0?Ge:function e(t,a){return t.filter(function(t){return!!function(e,t){return!t.role||e.some(function(e){return t.role.indexOf(e)>=0})}(a,t)&&(t.children&&t.children.length&&(t.children=e(t.children,a)),!0)})}(Ge,r),a("SET_ROUTERS",o),e()})}}},Ne={state:{reviewController:!1},mutations:{SET_CONTROLLER:function(e,t){e.reviewController=t}},actions:{GetReviewController:function(e){var t=e.commit;return new je.a(function(e,a){l.a.get(d+"/scored-mode/scored-state-turn-on",{params:{cookie:p("byd_performance")}}).then(function(a){0==a.data.code&&1==a.data.detail.scored_turn_on.state?t("SET_CONTROLLER",!0):t("SET_CONTROLLER",!1),e(a)}).catch(function(e){a(e)})})}}},Oe={roles:function(e){return e.user.roles},addRouters:function(e){return e.permission.addRouters},permission_routers:function(e){return e.permission.routers},reviewController:function(e){return e.reviewController.reviewController}};r.default.use(k.a);var Ee=new k.a.Store({modules:{user:Le,permission:xe,reviewController:Ne},getters:Oe}),Te=["/","/forgetPassword"];Pe.beforeEach(function(e,t,a){p("byd_performance")?"/"===e.path?a({path:"/personal"}):0===Ee.getters.addRouters.length?Ee.dispatch("GetUserInfo").then(function(t){var r=t.data.detail.role;Ee.dispatch("GenerateRoutes",r).then(function(){Pe.addRoutes(Ee.getters.addRouters),a(S()({},e,{replace:!0}))})}).catch(function(e){console.error(e)}):a():Te.includes(e.path)?a():a("/")});a("UoMW");a("hKoQ").polyfill(),r.default.config.productionTip=!1,r.default.use(Me.a),new r.default({el:"#app",router:Pe,store:Ee,components:{App:n},template:"<App/>"})},"P/Uy":function(e,t){},Pbnm:function(e,t){},UoMW:function(e,t){var a=16;function r(){var e=document.documentElement.clientWidth/1280;document.documentElement.style.fontSize=a*Math.min(e,2)+"px"}r(),window.onresize=function(){r()}},borg:function(e,t){},"dLd/":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAjCAIAAABHHv5rAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0RDE1MzdGQzE0NjlFNjExQUVDOUQxQUY4QjNCMEFEQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMTlFRDlFODY5MUQxMUU2QTVDOEFBRUM1QUREQjI4NiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMTlFRDlFNzY5MUQxMUU2QTVDOEFBRUM1QUREQjI4NiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjMzRDI1MEFGMUM2OUU2MTFBRUM5RDFBRjhCM0IwQURCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjREMTUzN0ZDMTQ2OUU2MTFBRUM5RDFBRjhCM0IwQURCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+WgYYLAAAC5tJREFUeNrUWFlzHNUZ7eX2PquWGc1IXiQLG9sxGLMFCITESR7yQFVSRfL78p5KHqhQlUBBpSiCCTYhhhhbtmXL2maf1vS+3Ns5t0eSJUvGBkOq0tU1Nd3Tc++53z3fOd/X4m9++7bw/3aQb/sHMRNUygpJWgkTnNX8E6cVp1ZCC3FqJDQTRU+RXZX4iuyoZEtXbF0ZGoqt8S+4mchS9r8BrVFWCeKGE844QcMN50YhECssUxhTKT4zOduHJBOFVBRTSUwkKZXFkMhdU9so6u2Ctl40NgsaFkNF8QcBjVHLYTJneyf77rzt172oFKdmygjbBzGWxEiWgJKJAJIhkiTjKzFSZggsfyRpOuGZroNII95Af2vCul211ksGtuX7BF0K41Nd51x7a3Hoz/ixTsfTCz6RNkx1qMojVXYV2Seyp0gAnXDQnEI5aIbnrYRhhcWElmM6EafVKC1FSTlKjm355zqjVkFbmiz8u16+UzFBpycFraZ0sTt6cWP4TNcFXDGP5ZqlbppqC6eldU3V1sFaEiPAgCtJVBIpgsz3JhMzBDuTKSM0I5SqlFoRR1wLkkaQYMA5P5kKksWBd9z2z3acq/XSlUYFsWePQZjDQZe98OV7/TfWhwujEJcDjdwt6bfKxnLF3Cwajq6EiswkSdyZYPfL7jZnOb+pIKTZ9tHN2DLLpJRqSYpkOOpGJ0bhCSeadyJEfW4UnOq7fz829Vmz8siQH/g5y2YHo4vLvddaI+xpXyfXq9aX00VsYregp0TexSd9cyYcWM94JZmSxRrbMOha2bxcSxpefHoYPDf0T9kBcqbuRnUv/OD4dMfSvmFw+fTps7sXjLETbfvt6603WiNg+mqy8O7C9PuL9aV6xTXUTJbE75Tse1eCQ5IkOT+YLNsauVXUbpT0gU7MTJh1o1M910rZelF3NfJo0JTSo92t3y21n+97Wyr54Ojkn8/MfT1TiRTyvbvDGD1wAz8W4SrSUlG7XdSwnqYfPzXwzJSulE3/ITwhu4jLW96v7/Yu9L2Wpf5lsX7p6BTUQE/prqfsFUGkSyxzdUO2QaSlnMJIR6jy7oNyLuFyJiA74SbIUFyK2UFJlWKiehK9WxL/YChtQ33rbv/1e33I4jsnZw7lNxmzgsXxm6uDV9vupqX98UzzkyOTRpy+stqHMO/Fse0yLIOyfjFTXqpaNTd8bXVQiilWeG26iBNiMqbvkS3/QmtrIkh6pnq5UYaP4hJ+SfcMiHgrlA119cpM6a6p+kLyzlwpVqTfL3V+udyFliM1DwdN03S+777WcfD9r0/VL81W0yTR3fD8xvDF9uhgpMfxaY4C+2R9wo8u3ulWohSgYYHQLICm+THbH/3sTncyTEDQVYPoCf35nW45ShEFcWdA/AWKjr803eBPTzfXVTWOo7/Vi5WYvXWr88ra4F7ZhLwG+92HT1BxA2Re04svN6ufz1S4TuFumgiU2974hEXvO1l2cuCda9linIyXA/MDW7I8U7FzCQ7GpFz4CK7TlNEU44j5k7sD4gueAQlf2LAB0ZCJoqiRJL7XKH01XYSKP7dpHxkFD0Y6TVNM/+zAh038c7aCrcScCAGMjUrb5vdhs3yjrI9jA3N+vue/1HUwEzSxZZAw5wOe3yXSWGICWYQf8XAKYorRRG49OFYt9R/1YsdQgPipUfhSxy0lVE8ZihmeBoqCiLVV4dN6ccH2f9R1UkmC4O4DjZCetYPpMMEPG0VjT7Jt72BA5P/UK1fqJb4MSrMkgS2f73s8swS+uWK2/aUa8OoCBWDZDRGLswMPaIQ9yxh/dgr6J8em7xl86mtOiDrs9ZaT5csWc5YTQmLGbha59cJ3/AOVCQqEbHEUYqFA7OxP1fFeF1J6cW141vYBjzEqJimcDJLUNtUNS8VMRl6QwL8rQTTfHZ3vjhbsgN9P2W6tIu6JBSgtKUTl9BV6OpeL8S+7CZpLodhV5L5GTg8oKsoDoIUsjuOWQDsKasj73kGFzBYY7oPgM61BDVPtVJ7gYksQ1omwrhNHkS6X1Kf7HmZtiyxIIhaEQRzhsVDky8a/bpikpZHZOOhlqS/QUUZZluUuI0qMRZRiFrB9S9iuG8cWFElCR8ZE1EniQ9RjqJKSH5GESpzN23vBdRfrETIw9WqtiKqDbtec2aIdoEAzoqTpRp80yu8en7pXMlSWrRR1bHmSMfwLgnC7YnaKukDI0mSxY5L5oculVciSfPBcFnkacOojhfJCZY/7cJlHoYKfXCIdAnq1bDacYNoJzDj1NOWBJyJwenbyaqMCcQCnoQuZOOCmFaeo1zSF3K1XOtMVRDSk6YWNARjPw0zkL5vVL45OKzA81NM+T7LxXmU8AfjiDUrllD3QOuxUKQJktBynqMy69zNtBzTYf3PCXBy6zS1vZhTsfWLMlUiRrUy40HEqfsRB03Rh6EM6uMDJMhSKEhmbAImLM7rHNVDdqkxTQ9hMwraH43fBDKG+5YP9phfCI+BfY8HeV1dlbN4Opvx4vWLdmSodAC1JyyXjeq38k+XOufX+WtXq68pYOuScYyB6wQnODd35gUs4GbdVJZHFXQLel31e/ufaTLO9rQ2ekNi2zkBSj3Vt9BZTXpTtCgv+mEvtuKaY8KLnOiMtZbdq5eWp4gOgecE11MjlerldMk5vDs+t9RW6rdN5LcGbEYQ3Ax/zVorLrcTPjTJiANOWH+gLY4lTMCa8J7h/X+DiwM0SRQuXTsbGBXfeQfKNyudCemIeOYxfXQUDXcC91phol8wHIz0W81WT/KtZuXgzemW5DeG7VC95inK1VhoZWk8naFiGuoKOKDcRUc2ySFNB5bVqYe+24utq0fj4yMREynxD2yzfn4zJIlL5o2NTSiasW+pIkXqmhr4ryY1JycUZo8GMpDB8eaX72toAK0QuIZSH1B6oBhWFi/nlqeKME76w2v/FjQ01Sa/MlK/NTd3kYYY4Z5vcb7exQUYxRx6YPTWuLMPNOhPFYbWoyLzgpHnIxyWooGrr00p3qozLRIQ3CKu1HbYIogRdJgRRN13/+TudN1d6ZkI/PDX7daP60NJUlolMWE/P3j8yoSUUFcWvljZnvOiz47WNipUzlY/OdkQ0PWygfPHKmAnJ/l4hNwu+gPELAzEfMNsRPgxI83Kl2R6+tNJ9tr0Fj/x0vobzYfU0bwLG3QTGsYnYMTWLZXNo2myvueWrKYN6BNBBcft4ZGl/6DMP3Bf3HCinakP3wnL7p8ud0z0HtL60UP/oZNM2tUd0Ljlurpi2Iq4XNKTgVBDXnQDQa6OgGCZ4gueWLH1vzYsgWFEyN3DOrXRfvts537Ing6RvaR+fmLm0MLNlao/V2CLYqAe46YvSe8cnO6b64w173vZOt4bHBk6rZIIqUM1eUR/pqqeS9DstANJUiBIYcG3Lb9jerO3NuLxmgrB+XSt/frx2s14JH/XuhhzgpYqgh5L4aaO8UdCe6Tpneu6sEyz0Rsf7jqMrA0sfWFqvoPctHfYZqDIsEye0D5nE9lSnEupmytCwqCkqTwoHtYIIAjzpBpNeBJG24pS/TpGl5aqF3vl6c6JdsR7nHR85SD7kE9BTWb5HCHDfqFpn+s6JYYDULAcxzvkeFz5kyUhXXI6bhAoB+kSWkxy3sIs4peiv0LkZcVKALYcxLnepjZ6tVdBvT5eWGtV2pZA89tY9JD3zfEeTn8ryzWnldtU6gmAPfXzWvbgIEHnksNHfihtYasi3RbI10ioaINu9qVKvUthrQ0/0Wmysrzh4vaHQVVVZqRaAsuGEdS9s8LcqERo+kzcdVGEP3VWugLIUEAmdERrstqV1SkanZHZgJaryQ73qHUMnhBt5pCgrugZfXfPDuhuiVSkh3vEYOkM+3S/ZMm7RIQFcOVCIq4FLqm1p/aJhF4xQJewJ3vs87ouYnXcrEpMkbPGaqa1OFvNyTNg2imy/nu3TYu4Du59PLpf/FWAA2yLKHGYhDScAAAAASUVORK5CYII="},l39X:function(e,t){},lf9d:function(e,t){},nw5S:function(e,t){},qXeo:function(e,t){},tvR6:function(e,t){},uGeG:function(e,t){},uMhA:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.af11f213549bf8e18f66.js.map